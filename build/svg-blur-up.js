/**
 * svg-blur-up v1.1.6 build Wed Sep 30 2020
 * https://github.com/vanruesc/blur-up
 * Copyright 2020 Raoul van RÃ¼schen
 * @license Zlib
 */
"use strict";var t=require("fs-extra"),e=require("path"),i=require("sharp");function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=n(t),a=n(e),o=n(i);function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l=function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;h(this,t),this.input=e,this.output=i,this.stdDeviationX=Math.max(n,0),this.stdDeviationY=Math.max(r,0),this.width=void 0===a&&void 0===o?40:a,this.height=o,this.format=null,this.originalWidth=0,this.originalHeight=0};function f(t){var e=o.default(t.input);return e.metadata().then((function(i){return t.format=i.format,t.originalWidth=i.width,t.originalHeight=i.height,e.resize(t.width,t.height).toBuffer({resolveWithObject:!0})}))}function s(t,e,i){var n="data:image/"+i.format+";base64,"+t.toString("base64"),r=void 0===i.width&&void 0!==i.height?Math.round(i.originalHeight/e.height):Math.round(i.originalWidth/e.width),a=r*e.width,o=r*e.height,h=i.originalWidth,u=i.originalHeight,l=i.stdDeviationX,f=i.stdDeviationY;return Buffer.from('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+h+'" height="'+u+'" viewBox="0 0 '+a+" "+o+'" preserveAspectRatio="none"><filter id="blur" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feGaussianBlur stdDeviation="'+l+" "+f+'" edgeMode="duplicate"/><feComponentTransfer><feFuncA type="discrete" tableValues="1 1" /></feComponentTransfer></filter><image filter="url(#blur)" x="0" y="0" height="100%" width="100%" xlink:href="'+n+'"/></svg>')}function d(t,e){var i=e.output;return""===a.default.extname(i)&&(i=a.default.join(i,a.default.basename(e.input,a.default.extname(e.input)))+".svg"),r.default.outputFile(i,t)}var g=function(){function t(){h(this,t)}var e,i,n;return e=t,n=[{key:"generate",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=new l(t,e,i.stdDeviationX,i.stdDeviationY,i.width,i.height);return f(n).then((function(t){return s(t.data,t.info,n)})).then((function(t){return d(t,n)}))}}],(i=null)&&u(e.prototype,i),n&&u(e,n),t}();module.exports=g;
